@page "/DispatchUI2"
@rendermode InteractiveServer
@inject IJSRuntime JSRuntime;

<div class="table">
    <div class="table-header">
        @foreach (var column in Columns)
        {
            <div class="table-cell">@column.Header</div>
        }
    </div>
    <div class="table-body">
        @foreach (var row in Rows)
        {
            <div class="table-row">
                @foreach (var cell in row.Cells)
                {
                    <div class="table-cell">@cell</div>
                }
            </div>
        }
    </div>
</div>

@code {
    [Parameter] public List<TableColumn> Columns { get; set; }
    [Parameter] public List<TableRow> Rows { get; set; }

    protected override void OnInitialized()
    {
        Columns = new List<TableColumn>()
        {
            new TableColumn(){ Header = "H1" },
            new TableColumn(){ Header = "H2" }
        };

        List<string> cells1 = new List<string>()
        {
            "R1C1", "R1C2"
        };

        List<string> cells2 = new List<string>()
        {
            "R2C1", "R2C2"
        };

        Rows = new List<TableRow>()
        {
            new TableRow(){ Cells = cells1 },
            new TableRow(){ Cells = cells2 }
        };
    }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await JSRuntime.InvokeVoidAsync("initDragAndDrop");
        }
    }

    public class TableColumn
    {
        public string Header { get; set; }
        // Add other properties as needed
    }

    public class TableRow
    {
        public List<string> Cells { get; set; } = new List<string>();
    }
}

